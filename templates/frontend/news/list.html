{% extends 'frontend/base.html' %}
{% load static %}

{% block title %}News & Announcements | AIFA Football Academy{% endblock %}

{% block meta_description %}Stay updated with the latest news, announcements, and updates from Altius International Football Academy.{% endblock %}

{% block og_title %}News & Announcements | AIFA Football Academy{% endblock %}
{% block og_description %}Stay updated with the latest news and announcements from AIFA Football Academy.{% endblock %}

{% block content %}
<!-- Page Hero -->
<section class="page-hero">
    <div class="page-hero-bg" style="background-image: url('{% if page_settings.hero_image %}{{ page_settings.hero_image.url }}{% else %}https://images.unsplash.com/photo-1504016798967-59a258e9386d?w=1920&q=80{% endif %}')"></div>
    <div class="page-hero-overlay"></div>
    <div class="page-hero-content">
        <div class="section-tag animate-on-scroll">Stay Updated</div>
        <h1 class="page-hero-title animate-on-scroll">{{ page_settings.hero_title|default:"NEWS & <span class='text-gradient'>ANNOUNCEMENTS</span>"|safe }}</h1>
        <p class="page-hero-text animate-on-scroll">{{ page_settings.hero_subtitle|default:"Latest updates from AIFA Football Academy" }}</p>
    </div>
</section>

<!-- News List -->
<section class="section">
    <div class="container">
        {% if news_list %}
        <div class="news-grid">
            {% for news in news_list %}
            <article class="news-card animate-on-scroll">
                <a href="{% url 'news:detail' news.slug %}" class="news-card-image">
                    {% if news.featured_image %}
                    <img src="{{ news.featured_image.url }}" alt="{{ news.title }}">
                    {% else %}
                    <img src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=600&q=80" alt="{{ news.title }}">
                    {% endif %}
                    <div class="news-card-overlay"></div>
                    <span class="news-card-category {% if news.category == 'announcement' %}announcement{% elif news.category == 'achievement' %}achievement{% else %}general{% endif %}">
                        {{ news.get_category_display }}
                    </span>
                </a>
                <div class="news-card-content">
                    <div class="news-card-meta">
                        <span class="news-card-date">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                            {{ news.published_at|date:"M d, Y" }}
                        </span>
                    </div>
                    <h3 class="news-card-title">
                        <a href="{% url 'news:detail' news.slug %}">{{ news.title }}</a>
                    </h3>
                    <p class="news-card-excerpt">{{ news.excerpt|truncatewords:20 }}</p>
                    <a href="{% url 'news:detail' news.slug %}" class="news-card-link">
                        Read More
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                    </a>
                </div>
            </article>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if page_obj.has_other_pages %}
        <div class="pagination">
            {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}" class="pagination-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
                Previous
            </a>
            {% endif %}

            <div class="pagination-numbers">
                {% for num in page_obj.paginator.page_range %}
                {% if page_obj.number == num %}
                <span class="pagination-num active">{{ num }}</span>
                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                <a href="?page={{ num }}" class="pagination-num">{{ num }}</a>
                {% endif %}
                {% endfor %}
            </div>

            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}" class="pagination-btn">
                Next
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
            </a>
            {% endif %}
        </div>
        {% endif %}

        {% else %}
        <div class="empty-state animate-on-scroll">
            <div class="empty-state-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/><path d="M12 18v-6M9 15h6"/></svg>
            </div>
            <h3>No News Yet</h3>
            <p>Stay tuned for the latest updates from AIFA Football Academy.</p>
        </div>
        {% endif %}
    </div>
</section>

<!-- CTA -->
<section class="section cta-section">
    <div class="cta-box animate-scale">
        <h2 class="cta-title">STAY CONNECTED</h2>
        <p class="cta-text">Follow us on social media for more updates and behind-the-scenes content</p>
        <div class="cta-buttons">
            <a href="{% url 'frontend:contact' %}" class="btn btn-primary">Contact Us</a>
            <a href="{% url 'events:list' %}" class="btn btn-outline">Upcoming Events</a>
        </div>
    </div>
</section>
{% endblock %}
