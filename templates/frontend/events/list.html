{% extends 'frontend/base.html' %}
{% load static %}

{% block title %}Events & Trials | AIFA Football Academy{% endblock %}

{% block meta_description %}Discover upcoming events, trials, and tournaments at Altius International Football Academy. Join us for exciting football activities and opportunities.{% endblock %}

{% block og_title %}Events & Trials | AIFA Football Academy{% endblock %}
{% block og_description %}Discover upcoming events, trials, and tournaments at AIFA Football Academy.{% endblock %}

{% block content %}
<!-- Page Hero -->
<section class="page-hero">
    <div class="page-hero-bg" style="background-image: url('{% if page_settings.hero_image %}{{ page_settings.hero_image.url }}{% else %}https://images.unsplash.com/photo-1517466787929-bc90951d0974?w=1920&q=80{% endif %}')"></div>
    <div class="page-hero-overlay"></div>
    <div class="page-hero-content">
        <div class="section-tag animate-on-scroll">Upcoming</div>
        <h1 class="page-hero-title animate-on-scroll">{{ page_settings.hero_title|default:"EVENTS & <span class='text-gradient'>TRIALS</span>"|safe }}</h1>
        <p class="page-hero-text animate-on-scroll">{{ page_settings.hero_subtitle|default:"Join our tournaments, trials, and training camps" }}</p>
    </div>
</section>

<!-- Filter -->
<section class="section section-sm">
    <div class="container">
        <div class="events-filter animate-on-scroll">
            <span class="filter-label">Filter by:</span>
            <div class="filter-buttons">
                <a href="{% url 'events:list' %}" class="filter-btn {% if not selected_type %}active{% endif %}">All Events</a>
                {% for type_value, type_label in event_types %}
                <a href="?type={{ type_value }}" class="filter-btn {% if selected_type == type_value %}active{% endif %}">{{ type_label }}</a>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<!-- Events List -->
<section class="section">
    <div class="container">
        {% if events %}
        <div class="events-grid">
            {% for event in events %}
            <article class="event-card animate-on-scroll">
                <div class="event-card-image">
                    {% if event.featured_image %}
                    <img src="{{ event.featured_image.url }}" alt="{{ event.title }}">
                    {% else %}
                    <img src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=600&q=80" alt="{{ event.title }}">
                    {% endif %}
                    <div class="event-card-overlay"></div>
                    <div class="event-card-date">
                        <span class="day">{{ event.start_date|date:"d" }}</span>
                        <span class="month">{{ event.start_date|date:"M" }}</span>
                    </div>
                    <span class="event-card-type">{{ event.get_event_type_display }}</span>
                </div>
                <div class="event-card-content">
                    <h3 class="event-card-title">
                        <a href="{% url 'events:detail' event.slug %}">{{ event.title }}</a>
                    </h3>
                    <p class="event-card-desc">{{ event.short_description|truncatewords:15 }}</p>
                    <div class="event-card-info">
                        <div class="info-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                            {% if event.start_time %}{{ event.start_time|time:"g:i A" }}{% else %}TBA{% endif %}
                        </div>
                        <div class="info-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                            {{ event.venue|truncatewords:3 }}
                        </div>
                    </div>
                    <div class="event-card-footer">
                        {% if event.is_free %}
                        <span class="event-price free">Free Entry</span>
                        {% elif event.registration_fee %}
                        <span class="event-price">Rs. {{ event.registration_fee }}</span>
                        {% endif %}
                        <a href="{% url 'events:detail' event.slug %}" class="btn btn-sm btn-primary">
                            View Details
                        </a>
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if page_obj.has_other_pages %}
        <div class="pagination">
            {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}{% if selected_type %}&type={{ selected_type }}{% endif %}" class="pagination-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
                Previous
            </a>
            {% endif %}

            <div class="pagination-numbers">
                {% for num in page_obj.paginator.page_range %}
                {% if page_obj.number == num %}
                <span class="pagination-num active">{{ num }}</span>
                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                <a href="?page={{ num }}{% if selected_type %}&type={{ selected_type }}{% endif %}" class="pagination-num">{{ num }}</a>
                {% endif %}
                {% endfor %}
            </div>

            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}{% if selected_type %}&type={{ selected_type }}{% endif %}" class="pagination-btn">
                Next
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
            </a>
            {% endif %}
        </div>
        {% endif %}

        {% else %}
        <div class="empty-state animate-on-scroll">
            <div class="empty-state-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            </div>
            <h3>No Upcoming Events</h3>
            <p>Check back soon for upcoming tournaments, trials, and training camps.</p>
        </div>
        {% endif %}
    </div>
</section>

<!-- CTA -->
<section class="section cta-section">
    <div class="cta-box animate-scale">
        <h2 class="cta-title">HOST AN EVENT?</h2>
        <p class="cta-text">Interested in organizing an event at our academy? Get in touch!</p>
        <div class="cta-buttons">
            <a href="{% url 'frontend:contact' %}" class="btn btn-primary">Contact Us</a>
            <a href="{% url 'programs:list' %}" class="btn btn-outline">View Programs</a>
        </div>
    </div>
</section>
{% endblock %}
